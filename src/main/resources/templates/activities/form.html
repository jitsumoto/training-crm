<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${isNew} ? '活動登録' : '活動編集'"></title>
</head>
<body>
<h1 th:text="${isNew} ? '活動登録' : '活動編集'"></h1>

<form th:action="${isNew}
        ? @{/projects/{projectId}/tasks/{taskId}/activities(projectId=${project.projectId}, taskId=${task.taskId})}
        : @{/projects/{projectId}/tasks/{taskId}/activities/{activityId}(projectId=${project.projectId}, taskId=${task.taskId}, activityId=${activityForm.activityId})}"
      method="post" th:object="${activityForm}">

    <input type="hidden" th:field="*{activityId}" />
    <input type="hidden" th:field="*{taskId}" />

    <div>
        <label for="activityAt">日時</label>
        <input id="activityAt" type="datetime-local" th:field="*{activityAt}" required />
        <div th:if="${#fields.hasErrors('activityAt')}" th:errors="*{activityAt}"></div>
    </div>

    <div>
        <label for="activityType">種別</label>
        <select id="activityType" th:field="*{activityType}">
            <option value="">--選択--</option>
            <option th:each="type : ${activityTypes}" th:value="${type}" th:text="${type}"></option>
        </select>
    </div>

    <div>
        <label for="location">場所</label>
        <input id="location" type="text" th:field="*{location}" />
    </div>

    <div>
        <label for="description">内容</label>
        <textarea id="description" rows="5" cols="40" th:field="*{description}" required></textarea>
        <div th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
    </div>

    <button type="submit" th:text="${isNew} ? '登録' : '更新'"></button>
</form>

<p>
    <a th:href="@{/projects/{projectId}/tasks/{taskId}/activities(projectId=${project.projectId}, taskId=${task.taskId})}">活動一覧へ戻る</a>
</p>
</body>
</html>
